awk -F, 'function basename(path, a, n) { n = split(path, a, "/"); return a[n] } NR > 1 { temp=$3; sub("http", "rsync", temp); print "rsync -avzP " temp " genomes/."; if (temp ~ ".*\.2bit") { input=basename(temp); output=input; sub(".2bit", ".fa", output); print "./twoBitToFa genomes/" input " genomes/" output } }' genomes.csv | bash